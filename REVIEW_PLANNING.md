# План ревью кода

## 1 Цели ревью кода
### Обеспечение корректности работы скрипта

Проверить, что скрипт корректно получает, обрабатывает и сохраняет данные курсов валют без ошибок.

### Оптимизация и читаемость кода

Убедиться, что код структурирован, содержит понятные комментарии и не имеет избыточных операций.

### Подготовка к масштабированию и доработкам

Проверить, можно ли легко расширить функционал (например, добавить новые валюты или источники данных).

## 2 Задачи для ревьювера
### Проверить корректность запросов к API

Убедиться, что URL формируется правильно, а ответ API обрабатывается без ошибок.

### Проанализировать обработку данных

Проверить парсинг XML, нормализацию курсов валют и структуру хранения данных.

### Оценить сохранение и визуализацию данных

Убедиться, что Excel-файл и графики создаются корректно, а данные в них актуальны.

### Проверить обработку ошибок и edge-cases

Протестировать работу скрипта при отсутствии данных (например, в выходные дни).

## 3 Объекты проверки
### HTTP-запросы и API

Формирование URL, кодировка ответа, обработка статус-кодов.

### Парсинг XML

Корректность извлечения CharCode, Value, Nominal и конвертации в числовой формат.

### Структура данных (currency_data)

Проверка формата хранения данных (дата, курс) и отсутствия пропусков.

### Сохранение в Excel и графики

Правильность создания листов, сортировки дат, оформления графиков.

### Обработка исключений

Наличие проверок на пустые данные, ошибки запросов, корректные сообщения пользователю.

## Чек-лист ревью

### 1. Проверка импортов

Убедиться, что все необходимые библиотеки импортированы (requests, pandas, matplotlib, datetime, xml.etree.ElementTree).

Проверить, нет ли неиспользуемых импортов.

### 2. Корректность списка валют

Проверить, что список currencies содержит корректные коды валют (DKK, CAD, NZD, PLN).

Убедиться, что эти коды соответствуют валютам, указанным в комментарии.

### 3. Работа с датами

Проверить логику установки диапазона дат (start_date, end_date).

Убедиться, что форматирование даты (formatted_date) соответствует требованиям API ЦБ РФ (%d/%m/%Y).

### 4. HTTP-запросы и обработка ответов

Убедиться, что URL для запроса формируется корректно.

Проверить обработку статуса ответа (response.status_code == 200).

Убедиться, что кодировка ответа установлена верно (windows-1251).

### 5. Парсинг XML

Проверить корректность парсинга XML-данных (извлечение CharCode, Value, Nominal).

Убедиться, что значения курсов нормализуются правильно (value / nominal).

### 6. Структура данных

Проверить, что данные сохраняются в словарь currency_data в ожидаемом формате.

Убедиться, что даты и значения курсов записываются без ошибок.

### 7. Сохранение в Excel

Проверить создание и сохранение Excel-файла (currency_rates.xlsx).

Убедиться, что данные для каждой валюты сохраняются в отдельный лист.

Проверить сортировку данных по дате.

### 8. Построение графиков

Убедиться, что графики создаются для каждой валюты.

Проверить корректность подписей осей, заголовков и формата дат.

Убедиться, что графики сохраняются в файлы (DKK_trend.png, CAD_trend.png и т.д.).

Проверить параметры графиков (размер, цвет, маркеры, сетка).

### 9. Обработка ошибок

Проверить, есть ли обработка случаев отсутствия данных для валюты (вывод сообщения Нет данных для {currency}).

Убедиться, что скрипт не завершается аварийно при ошибках запроса или парсинга.

### 10. Комментарии и выводы

Проверить наличие и ясность комментариев в коде.

Убедиться, что выводится информативное сообщение о завершении работы (список созданных файлов).

Проверить, нет ли избыточного или дублирующегося кода.

